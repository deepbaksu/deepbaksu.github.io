{
    "version": "https://jsonfeed.org/version/1",
    "title": "ë”¥ë°±ìˆ˜ â€¢ All posts by \"fx\" tag",
    "description": "ìš°ë¦¬ëŠ” 'ì§€ì†ê°€ëŠ¥í•œ ë°±ìˆ˜ì§ˆ'ì„ ì§€í–¥í•©ë‹ˆë‹¤. ê³ ë¡œ ì™¸ë¡­ê²Œ ê³µë¶€í•˜ê³  ìˆì„ ë‹¹ì‹ ì„ ì‘ì›í•©ë‹ˆë‹¤. ë”¥ëŸ¬ë‹ì— ê´€ë ¨ëœ ê¸€ ë¿ë§Œ ì•„ë‹ˆë¼, ë°±ìˆ˜ìƒí™œì˜ ë„‹ë‘ë¦¬ë„ í™˜ì˜í•©ë‹ˆë‹¤.",
    "home_page_url": "https://deepbaksu.github.io",
    "items": [
        {
            "id": "https://deepbaksu.github.io/2020/08/21/Go-wire-dependency-injection-tutorial/",
            "url": "https://deepbaksu.github.io/2020/08/21/Go-wire-dependency-injection-tutorial/",
            "title": "Go Dependency Injection Tutorial (feat. Wire)",
            "date_published": "2020-08-21T15:15:25.000Z",
            "content_html": "<p>Dependency Injection(DI)ì„ í•œêµ­ì–´ë¡œ ì˜ì¡´ì„± ì£¼ì…ì´ë¼ê³ ë„ í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” DIë¼ê³  í–ˆì„ë•Œ ìš°ë¦¬ëŠ” DI Framework/Library ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ìš°ì„  Dependency Injection ì´ ë¬´ì—‡ì¸ì§€ ì— ëŒ€í•´ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´ <code>PostService</code> ëŠ” ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ê°€ ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.</p>\n<figure class=\"highlight golang\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> PostService <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">  CreatePost(Post) Post</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ì´ë•Œ ìš°ë¦¬ëŠ” ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ <code>CreatePost(Post)</code> í•¨ìˆ˜ ì•ˆì—ì„œ</p>\n<ol>\n<li>ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê³ </li>\n<li>Post ë¥¼ INSERT í•œë‹¤.</li>\n</ol>\n<p>ì´ëŸ°ì‹ìœ¼ë¡œ í•  ìˆ˜ ë„ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ°ì‹ìœ¼ë¡œ í•˜ê¸°ë³´ë‹¤ëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ë£¨ëŠ” ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ì½”ë“œëŠ” <code>PostRepository</code> ì— ëŒ€í–‰ì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤.</p>\n<figure class=\"highlight golang\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> PostRepository <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">  StorePost(Post) <span class=\"keyword\">bool</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/2020/08/21/Go-wire-dependency-injection-tutorial/architecture.jpg\" alt=\"Architecture\" /></p>\n<p>ì¦‰ ë³´ì‹œë‹¤ì‹¶ì´ <code>PostService</code> ê°€ <code>PostRepository</code> ì— ì˜ì¡´í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br />\nê·¸ëŸ¬ë©´ <code>PostService</code> ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">NewPostService</span><span class=\"params\">(repo PostRepository)</span> <span class=\"title\">PostService</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &amp;postService&#123;</span><br><span class=\"line\">\t\tRepo: repo,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ì´ê²Œ Dependency Injection ì…ë‹ˆë‹¤. ì´ë•Œ ë§Œì•½ Postgresê°€ ì•„ë‹ˆë¼ Sqlite ë‚˜ ì‹¬ì§€ì–´ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ê³  ì‹¶ìœ¼ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ê·¸ì— í•´ë‹¹í•˜ëŠ” PostRepository ê°ì²´ë¥¼ ë°”ê¿”ê»´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<p><img src=\"/2020/08/21/Go-wire-dependency-injection-tutorial/different_repository.svg\" alt=\"InMemoryPostRepository\" /></p>\n<p>ì´ë ‡ê²Œ ì˜ì¡´ì„±ì´ ê°„ë‹¨í•˜ë©´ Dependency Injection í”„ë ˆì„ì›Œí¬ê°€ ì—†ë”ë¼ë„ ì†ìœ¼ë¡œ Dependency Injection ì„¤ê³„ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ì˜ì¡´í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ ë§ì•„ì§„ë‹¤ë©´?</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">NewPostService</span><span class=\"params\">(someService SomeService, otherService OtherService, repo PostRepository, ...)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// main.go</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  otherSerivce := NewOtherService(<span class=\"string\">&quot;secret&quot;</span>)</span><br><span class=\"line\">  someService := NewSomeService(otherService)</span><br><span class=\"line\">  postRepository := NewPostRepository(<span class=\"string\">&quot;dburl&quot;</span>)</span><br><span class=\"line\">  potService := NewPostService(someService, otherService, postRepository)</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ì¼ì¼íˆ ì†ìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ”ê²Œ ë§¤ìš° ê·€ì°®ê³  ì†ì´ ë§ì´ê°‘ë‹ˆë‹¤. ìˆœì„œë„ ë§ì¶°ì¤˜ì•¼ ë˜ê³  argument ìœ„ì¹˜ë‚˜ ê·€ì°®ì€ê²Œ í•œë‘ê°€ì§€ê°€ ì•„ë‹™ë‹ˆë‹¤. ì´ê±¸ ìë™ìœ¼ë¡œ í•´ì£¼ëŠ” ê²ƒì´ ë°”ë¡œ Dependency Injection Framework ì´ê³  Go ì—ì„œëŠ” <a href=\"https://github.com/google/wire\">wire</a> ì™€ <a href=\"https://github.com/uber-go/fx\">fx</a> ê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ì¤€ë¹„ë¬¼\"><a class=\"markdownIt-Anchor\" href=\"#ì¤€ë¹„ë¬¼\"></a> ì¤€ë¹„ë¬¼</h2>\n<p>ì—¬ê¸°ì„œëŠ” êµ¬ê¸€ì˜ <a href=\"https://github.com/google/wire\">wire</a> ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">go get github.com/google/wire/cmd/wire</span><br></pre></td></tr></table></figure>\n<h2 id=\"í”„ë¡œì íŠ¸-êµ¬ì¡°\"><a class=\"markdownIt-Anchor\" href=\"#í”„ë¡œì íŠ¸-êµ¬ì¡°\"></a> í”„ë¡œì íŠ¸ êµ¬ì¡°</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ cmd</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ server.go</span><br><span class=\"line\">â”œâ”€â”€ go.mod</span><br><span class=\"line\">â”œâ”€â”€ go.sum</span><br><span class=\"line\">â”œâ”€â”€ module</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ wire.go</span><br><span class=\"line\">â””â”€â”€ post</span><br><span class=\"line\">    â”œâ”€â”€ postrepository.go</span><br><span class=\"line\">    â””â”€â”€ postservice.go</span><br><span class=\"line\"></span><br><span class=\"line\">3 directories, 6 files</span><br></pre></td></tr></table></figure>\n<p>ê° <code>postservice.go</code> ì™€ <code>postrepository.go</code> íŒŒì¼ì€ ì´ì „ì—ì„œ ë³¸ê²ƒê³¼ ë™ì¼í•©ë‹ˆë‹¤.</p>\n<figure class=\"highlight golang\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// postservice.go</span></span><br><span class=\"line\"><span class=\"keyword\">package</span> post</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// (skip)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// PostService ë¥¼ ìƒì„±í•˜ëŠ” factory function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">NewPostService</span><span class=\"params\">(repository PostRepository)</span> *<span class=\"title\">PostService</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &amp;PostService&#123;Repo: repository&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight golang\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// postrepository.go</span></span><br><span class=\"line\"><span class=\"keyword\">package</span> post</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> PostRepository <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">\tStorePost(Post) <span class=\"keyword\">bool</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> InMemoryPostRepository <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tcache <span class=\"keyword\">map</span>[<span class=\"keyword\">string</span>]Post</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(i *InMemoryPostRepository)</span> <span class=\"title\">StorePost</span><span class=\"params\">(post Post)</span> <span class=\"title\">bool</span></span> &#123;</span><br><span class=\"line\">\ti.cache[post.id] = post</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ì¸ë©”ëª¨ë¦¬ í¬ìŠ¤íŠ¸ë¦¬í¬ì§€í† ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í•¨ìˆ˜</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">NewInMemoryPostRepository</span><span class=\"params\">()</span> <span class=\"title\">PostRepository</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &amp;InMemoryPostRepository&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ì´ì œ <code>module/wire.go</code> íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<figure class=\"highlight golang\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//+build wireinject  &lt;--- ë§¤ìš° ì¤‘ìš”</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> module</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">&quot;example/post&quot;</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;github.com/google/wire&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">InitializePostService</span><span class=\"params\">()</span> *<span class=\"title\">post</span>.<span class=\"title\">PostService</span></span> &#123;</span><br><span class=\"line\">\twire.Build(post.NewInMemoryPostRepository, post.NewPostService) <span class=\"comment\">// &lt;-- Factory í•¨ìˆ˜ë“¤</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &amp;post.PostService&#123;&#125; <span class=\"comment\">// &lt;-- Return Typeì„ ë§ˆì¶”ê¸° ìœ„í•œ ë”ë¯¸ë¡œ ì¤‘ìš”í•˜ì§€ ì•ŠìŒ</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ì´ì œ shell ì—ì„œ <code>wire</code> ì»¤ë§¨ë“œë¥¼ ì¹˜ë©´ ì½”ë“œê°€ ìƒì„±ì´ ë©ë‹ˆë‹¤.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wire module/wire.go</span><br></pre></td></tr></table></figure>\n<p>ì•„ë˜ëŠ” ìƒì„±ëœ ì½”ë“œì…ë‹ˆë‹¤. <code>PostRepository</code> ì™€ <code>PostService</code> ê°€ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ìƒì„±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<figure class=\"highlight golang\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">InitializePostService</span><span class=\"params\">()</span> *<span class=\"title\">post</span>.<span class=\"title\">PostService</span></span> &#123;</span><br><span class=\"line\">\tpostRepository := post.NewInMemoryPostRepository()</span><br><span class=\"line\">\tpostService := post.NewPostService(postRepository)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> postService</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://bit.ly/2Sqdnws\">https://bit.ly/2Sqdnws</a> ì— ì°¸ì—¬í•˜ì…”ì„œ ë¬¸ì˜ì£¼ì„¸ìš” ğŸ˜„</p>\n",
            "tags": [
                "Mo Kweon",
                "go",
                "golang",
                "dependency injection",
                "wire",
                "uber-go",
                "fx"
            ]
        }
    ]
}